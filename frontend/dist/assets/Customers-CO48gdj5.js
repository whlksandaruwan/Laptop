import{r as l,f as b,j as e,m as C,U as j,S,M as L,P as A,g as P,h as M}from"./index-Cwv92vJa.js";import{F as I}from"./filter-qRH-FEY4.js";import{C as O,a as F}from"./chevron-right-Bnng0sUX.js";const R=()=>{const[x,u]=l.useState([]),[d,i]=l.useState([]),[n,N]=l.useState(""),[v,c]=l.useState(!0),[r,g]=l.useState(1),[m]=l.useState(10);l.useEffect(()=>{document.title="Manage Customers - TechWave Admin",c(!0),b.get("http://localhost:3000/api/auth/users").then(s=>{console.log("API users:",s.data);const a=s.data.map(t=>({id:t.id,name:t.firstName+" "+t.lastName,email:t.email,phone:"",location:"",totalSpent:0,orders:0,lastOrder:t.updatedAt?new Date(t.updatedAt).toLocaleDateString():"",role:t.role}));u(a),i(a),c(!1)}).catch(()=>{u([]),i([]),c(!1)})},[]);const w=s=>{s.preventDefault(),c(!0),setTimeout(()=>{if(n.trim()==="")i(x);else{const a=x.filter(t=>t.name.toLowerCase().includes(n.toLowerCase())||t.email.toLowerCase().includes(n.toLowerCase())||t.phone.includes(n));i(a)}g(1),c(!1)},500)},h=r*m,y=h-m,f=d.slice(y,h),o=Math.ceil(d.length/m),p=s=>{g(s)};return e.jsxs(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Customers"}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Add Customer"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-8",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("form",{onSubmit:w,className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search customers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:n,onChange:s=>{N(s.target.value),s.target.value.trim()===""&&i(x)}}),e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Customers"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"new",children:"New (Last 30 days)"})]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"More Filters"]})]})]})}),v?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Orders"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Spent"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Order"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.length>0?f.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center",children:e.jsx(j,{className:"w-5 h-5"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(L,{className:"w-4 h-4 mr-1 text-gray-400"}),s.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1 text-gray-400"}),s.phone]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(P,{className:"w-4 h-4 mr-1 text-gray-400"}),s.orders]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:M(s.totalSpent)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.lastOrder}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.role}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"text-primary-600 hover:text-primary-800 mr-3",children:"View"}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:"Edit"})]})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsx("div",{className:"text-gray-500",children:"No customers found"})})})})]})}),o>1&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:y+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(h,d.length)})," ","of ",e.jsx("span",{className:"font-medium",children:d.length})," customers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>p(Math.max(1,r-1)),disabled:r===1,className:`p-2 rounded-md ${r===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-200"}`,children:e.jsx(O,{className:"w-5 h-5"})}),[...Array(o)].map((s,a)=>e.jsx("button",{onClick:()=>p(a+1),className:`w-8 h-8 rounded-md ${r===a+1?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-200"}`,children:a+1},a)),e.jsx("button",{onClick:()=>p(Math.min(o,r+1)),disabled:r===o,className:`p-2 rounded-md ${r===o?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-200"}`,children:e.jsx(F,{className:"w-5 h-5"})})]})]})]})]})]})};export{R as default};
