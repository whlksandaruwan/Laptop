import{c as P,u as L,o as M,r as a,j as e,m as R,p as $,L as x,h as n,d as c}from"./index-NqqZXcSm.js";import{T as E}from"./trash-2-NopoqH9U.js";import{C as y}from"./check-circle-yHJ20WZo.js";import{A as F}from"./arrow-right-wMioXI1T.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=P("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),U=()=>{const f=L(),{items:o,removeItem:p,updateQuantity:j,clearCart:g,getCartTotal:h}=M(),[l,v]=a.useState([]),[N,u]=a.useState(!0),[b,w]=a.useState(0),[d,C]=a.useState(0),[k,S]=a.useState(0);a.useEffect(()=>{(async()=>{const t=await h(),r=t>999?0:30;w(t),C(r),S(t+r)})()},[h,o]),a.useEffect(()=>{document.title="Your Cart - TechWave",(async()=>{u(!0);try{const t=await Promise.all(o.map(async r=>{try{const i=await fetch(`http://localhost:3000/api/laptops/${r.productId}`);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return{...await i.json(),quantity:r.quantity}}catch(i){return console.error(`Failed to fetch product ${r.productId}:`,i),null}}));v(t.filter(Boolean))}catch(t){console.error("Failed to fetch cart products:",t),c.error("Failed to load cart items. Please try again.")}finally{u(!1)}})()},[o]);const T=s=>{p(s),c.success("Item removed from cart")},m=(s,t)=>{j(s,t)},q=()=>{g(),c.success("Cart cleared")},I=()=>{if(l.length===0){c.error("Your cart is empty");return}f("/checkout")};return e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"pt-16 md:pt-20",children:[e.jsx("div",{className:"bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Your Cart"}),e.jsx("p",{className:"text-gray-600",children:"Review your items and proceed to checkout"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:N?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):l.length===0?e.jsxs("div",{className:"text-center py-16 max-w-md mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-6",children:e.jsx($,{className:"w-8 h-8 text-gray-500"})}),e.jsx("h2",{className:"text-2xl font-medium mb-4",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't added any products to your cart yet. Start shopping to add items to your cart."}),e.jsx(x,{to:"/products",className:"inline-flex items-center justify-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors",children:"Start Shopping"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsxs("h2",{className:"font-medium",children:["Shopping Cart (",l.length," items)"]}),e.jsxs("button",{onClick:q,className:"text-sm text-red-600 hover:text-red-800 font-medium flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),"Clear Cart"]})]}),e.jsx("div",{children:l.map(s=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start p-6 border-b last:border-b-0",children:[e.jsx("div",{className:"sm:w-24 sm:h-24 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden mb-4 sm:mb-0",children:e.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover object-center"})}),e.jsxs("div",{className:"sm:ml-6 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{to:`/products/${s.id}`,className:"text-lg font-medium hover:text-primary-600 transition-colors",children:s.name}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Category: ",s.categoryId]})]}),e.jsx("div",{className:"mt-2 sm:mt-0 text-right",children:e.jsx("div",{className:"font-bold",children:n(s.price*s.quantity)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-4",children:[e.jsx("label",{htmlFor:`quantity-${s.id}`,className:"sr-only",children:"Quantity"}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>m(s.id,Math.max(1,s.quantity-1)),className:"px-2 py-1 border border-gray-300 bg-gray-50 text-gray-600 rounded-l-md hover:bg-gray-100",children:"-"}),e.jsx("input",{type:"number",id:`quantity-${s.id}`,min:"1",max:s.stock,value:s.quantity,onChange:t=>m(s.id,Math.max(1,Math.min(s.stock,parseInt(t.target.value)||1))),className:"w-12 text-center border-y border-gray-300 py-1 focus:ring-0 focus:outline-none"}),e.jsx("button",{onClick:()=>m(s.id,Math.min(s.stock,s.quantity+1)),className:"px-2 py-1 border border-gray-300 bg-gray-50 text-gray-600 rounded-r-md hover:bg-gray-100",children:"+"})]})]}),e.jsxs("button",{onClick:()=>T(s.id),className:"text-sm text-red-600 hover:text-red-800 font-medium flex items-center",children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),"Remove"]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center text-sm text-gray-600",children:[e.jsx(y,{className:`w-4 h-4 mr-1 ${s.stock>0?"text-green-500":"text-red-500"}`}),s.stock>0?"In Stock":"Out of Stock"]})]})]})]},s.id))})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs(x,{to:"/products",className:"text-primary-600 hover:text-primary-800 font-medium flex items-center",children:[e.jsx(F,{className:"w-4 h-4 mr-2 rotate-180"}),"Continue Shopping"]})})]}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden sticky top-24",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsx("h2",{className:"font-medium",children:"Order Summary"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:n(b)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Shipping"}),e.jsx("span",{className:"font-medium",children:d===0?"Free":n(d)})]}),d===0&&e.jsxs("div",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),"You qualify for free shipping!"]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:n(k)})]})}),e.jsx("button",{onClick:I,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Proceed to Checkout"})]})]})})]})})]})};export{U as default};
