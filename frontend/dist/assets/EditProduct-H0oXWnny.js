import{u as k,k as C,r as l,l as F,d as u,j as e,m as w,n as I}from"./index-Cwv92vJa.js";const q=()=>{const m=k(),{id:o}=C(),[p,g]=l.useState(!1),[y,x]=l.useState(!0),[r,c]=l.useState({name:"",description:"",price:"",specs:{processor:"",ram:"",storage:"",display:"",graphics:"",battery:""},images:[""],stock:"",categoryId:"",featured:!1});l.useEffect(()=>{document.title="Edit Product - TechWave Admin",h()},[o]);const h=async()=>{if(o)try{x(!0);const s=await F(o);c({name:s.name,description:s.description,price:s.price.toString(),specs:s.specs,images:s.images.length>0?s.images:[""],stock:s.stock.toString(),categoryId:s.categoryId,featured:s.featured})}catch{u.error("Failed to fetch product"),m("/admin/products")}finally{x(!1)}},a=s=>{const{name:t,value:i,type:n}=s.target;if(t.startsWith("specs.")){const d=t.split(".")[1];c(f=>({...f,specs:{...f.specs,[d]:i}}))}else c(d=>({...d,[t]:n==="checkbox"?s.target.checked:i}))},b=(s,t)=>{c(i=>({...i,images:i.images.map((n,d)=>d===s?t:n)}))},j=()=>{c(s=>({...s,images:[...s.images,""]}))},N=s=>{c(t=>({...t,images:t.images.filter((i,n)=>n!==s)}))},v=async s=>{if(s.preventDefault(),!!o){g(!0);try{await I(o,{...r,price:Number(r.price),stock:Number(r.stock),images:r.images.filter(t=>t.trim()!=="")}),u.success("Product updated successfully"),m("/admin/products")}catch{u.error("Failed to update product")}finally{g(!1)}}};return y?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"max-w-2xl mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Edit Product"}),e.jsxs("form",{className:"space-y-6",onSubmit:v,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Product Name"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:r.name,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",required:!0,value:r.description,onChange:a,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"price",children:"Price"}),e.jsx("input",{id:"price",name:"price",type:"number",step:"0.01",required:!0,value:r.price,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"stock",children:"Stock"}),e.jsx("input",{id:"stock",name:"stock",type:"number",required:!0,value:r.stock,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"categoryId",children:"Category ID"}),e.jsx("input",{id:"categoryId",name:"categoryId",type:"text",required:!0,value:r.categoryId,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"specs.processor",children:"Processor"}),e.jsx("input",{id:"specs.processor",name:"specs.processor",type:"text",required:!0,value:r.specs.processor,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"specs.ram",children:"RAM"}),e.jsx("input",{id:"specs.ram",name:"specs.ram",type:"text",required:!0,value:r.specs.ram,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"specs.storage",children:"Storage"}),e.jsx("input",{id:"specs.storage",name:"specs.storage",type:"text",required:!0,value:r.specs.storage,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"specs.display",children:"Display"}),e.jsx("input",{id:"specs.display",name:"specs.display",type:"text",required:!0,value:r.specs.display,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"specs.graphics",children:"Graphics"}),e.jsx("input",{id:"specs.graphics",name:"specs.graphics",type:"text",required:!0,value:r.specs.graphics,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"specs.battery",children:"Battery"}),e.jsx("input",{id:"specs.battery",name:"specs.battery",type:"text",required:!0,value:r.specs.battery,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Images"}),e.jsx("button",{type:"button",onClick:j,className:"text-sm text-primary-600 hover:text-primary-700",children:"Add Image URL"})]}),r.images.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:s,onChange:i=>b(t,i.target.value),placeholder:"Image URL",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),t>0&&e.jsx("button",{type:"button",onClick:()=>N(t),className:"px-3 py-2 text-red-600 hover:text-red-700",children:"Remove"})]},t))]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"featured",name:"featured",type:"checkbox",checked:r.featured,onChange:a,className:"mr-2"}),e.jsx("label",{htmlFor:"featured",className:"text-sm",children:"Featured Product"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>m("/admin/products"),className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 py-2 px-4 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:p?"Saving...":"Save Changes"})]})]})]})};export{q as default};
