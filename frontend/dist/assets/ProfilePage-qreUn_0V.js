import{c as k,t as T,b as W,r as o,j as e,m as D,U as I,v as U,H as V,h as N,L as w,d as u}from"./index-DODvdglr.js";import{C as z}from"./check-circle-C_k2FxPH.js";import{P as v}from"./package-BW4k0-dy.js";import{C as q}from"./credit-card-Byrl1Tcs.js";import{C as H}from"./check-XZPAyzYU.js";import{T as R}from"./truck-CYFl_xbY.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=k("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=k("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_=()=>{const[p]=T(),{user:s,logout:P,isAuthenticated:y,token:c}=W(),[a,d]=o.useState("orders"),[f,C]=o.useState([]),[S,m]=o.useState(!0),[g,j]=o.useState(null),[O,x]=o.useState(!1);o.useEffect(()=>{if(document.title="My Account - TechWave",p.get("order")){x(!0);const i=setTimeout(()=>{x(!1)},1e4);return()=>clearTimeout(i)}(async()=>{if(!y||!c){m(!1);return}try{m(!0),j(null);const i=await fetch("http://localhost:3000/api/orders",{headers:{Authorization:`Bearer ${c}`}});if(!i.ok)throw new Error(`Failed to fetch orders: ${i.statusText}`);const A=await i.json(),E=await Promise.all(A.map(async b=>{const F=await Promise.all(b.items.map(async t=>{if(t.name&&t.image&&t.price)return t;try{const n=await fetch(`http://localhost:3000/api/laptops/${t.productId}`);if(!n.ok)return console.error(`Failed to fetch product for order item ${t.productId}:`,n.statusText),{...t,name:"Unknown Product",image:"/placeholder.jpg",price:0};const h=await n.json();return{...t,name:h.name,image:h.images[0]||"/placeholder.jpg",price:h.price}}catch(n){return console.error(`Error fetching product for order item ${t.productId}:`,n),{...t,name:"Unknown Product",image:"/placeholder.jpg",price:0}}}));return{...b,items:F}}));C(E)}catch(i){console.error("Error fetching orders:",i),j("Failed to load orders. Please try again later.")}finally{m(!1)}})()},[p,y,c]);const L=()=>{P(),u.success("Logged out successfully")},$=r=>{r.preventDefault(),u.success("Profile updated successfully")},M=r=>{r.preventDefault(),u.success("Password updated successfully")};return e.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"pt-16 md:pt-20",children:[O&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-6 w-6 text-green-500 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-800 font-medium",children:"Order Placed Successfully!"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Thank you for your order. We'll send you a confirmation email shortly."})]}),e.jsx("button",{onClick:()=>x(!1),className:"ml-auto text-green-700 hover:text-green-900","aria-label":"Close",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"bg-gray-50 py-8",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary-100 flex items-center justify-center mr-4",children:s!=null&&s.avatar?e.jsx("img",{src:s.avatar,alt:s.name,className:"w-16 h-16 rounded-full"}):e.jsx(I,{className:"w-8 h-8 text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold mb-1",children:["Welcome, ",s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.email})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:e.jsxs("nav",{className:"divide-y",children:[e.jsxs("button",{onClick:()=>d("orders"),className:`flex items-center w-full px-6 py-4 hover:bg-gray-50 transition-colors ${a==="orders"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:[e.jsx(v,{className:"w-5 h-5 mr-3"}),"My Orders"]}),e.jsxs("button",{onClick:()=>d("addresses"),className:`flex items-center w-full px-6 py-4 hover:bg-gray-50 transition-colors ${a==="addresses"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:[e.jsx(U,{className:"w-5 h-5 mr-3"}),"Addresses"]}),e.jsxs("button",{onClick:()=>d("payment"),className:`flex items-center w-full px-6 py-4 hover:bg-gray-50 transition-colors ${a==="payment"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:[e.jsx(q,{className:"w-5 h-5 mr-3"}),"Payment Methods"]}),e.jsxs("button",{onClick:()=>d("wishlist"),className:`flex items-center w-full px-6 py-4 hover:bg-gray-50 transition-colors ${a==="wishlist"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:[e.jsx(V,{className:"w-5 h-5 mr-3"}),"Wishlist"]}),e.jsxs("button",{onClick:()=>d("settings"),className:`flex items-center w-full px-6 py-4 hover:bg-gray-50 transition-colors ${a==="settings"?"bg-primary-50 text-primary-600":"text-gray-700"}`,children:[e.jsx(G,{className:"w-5 h-5 mr-3"}),"Account Settings"]}),e.jsxs("button",{onClick:L,className:"flex items-center w-full px-6 py-4 hover:bg-gray-50 transition-colors text-red-600",children:[e.jsx(B,{className:"w-5 h-5 mr-3"}),"Sign Out"]})]})})}),e.jsxs("div",{className:"lg:col-span-3",children:[a==="orders"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsx("h2",{className:"font-medium",children:"My Orders"})}),S?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):g?e.jsxs("div",{className:"text-center py-12 text-red-500",children:["Error: ",g]}):f.length===0?e.jsx("div",{className:"text-center py-12 text-gray-600",children:"You haven't placed any orders yet."}):e.jsx("div",{className:"divide-y",children:f.map(r=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["Order #",r.id.slice(0,8)]}),e.jsxs("div",{className:"font-medium",children:["Placed on ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"font-bold text-lg",children:N(r.totalAmount)}),e.jsx("div",{className:"flex items-center mt-1",children:r.status==="delivered"?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-600",children:"Delivered"})]}):r.status==="shipped"?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 text-blue-500 mr-1"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Shipped"})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 text-orange-500 mr-1"}),e.jsx("span",{className:"text-sm text-orange-600 capitalize",children:r.status})]})})]})]}),e.jsx("div",{className:"space-y-4 mb-4",children:r.items.map(l=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium",children:l.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Qty: ",l.quantity]}),e.jsx("div",{className:"text-sm font-medium",children:N(l.price*l.quantity)})]})]},l.productId))}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(w,{to:`/orders/${r.id}`,className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700 transition-colors",children:"View Order Details"}),r.status==="delivered"&&e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Write a Review"})]})]},r.id))})]}),a==="addresses"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"font-medium mb-4",children:"My Addresses"}),e.jsx("div",{className:"text-gray-600",children:"No addresses added yet."})]}),a==="payment"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"font-medium mb-4",children:"Payment Methods"}),e.jsx("div",{className:"text-gray-600",children:"No payment methods added yet."})]}),a==="wishlist"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"font-medium mb-4",children:"My Wishlist"}),e.jsx("p",{className:"text-gray-600",children:"This section will display your wishlist items."}),e.jsx(w,{to:"/wishlist",className:"text-primary-600 hover:underline mt-4 inline-block",children:"Go to Wishlist"})]}),a==="settings"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"font-medium mb-4",children:"Account Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Personal Information"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",id:"name",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",defaultValue:`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",defaultValue:(s==null?void 0:s.email)||""})]}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Save Changes"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Password"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current-password",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),e.jsx("input",{type:"password",id:"current-password",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{type:"password",id:"new-password",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("input",{type:"password",id:"confirm-password",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Change Password"})]})]})]})]})]})})]})};export{_ as default};
